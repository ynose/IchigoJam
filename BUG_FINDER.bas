'A,B BUG X,Y
'D   BUG Direction
'    012
'    7 3
'    654
'L,T FINDER X,Y

1 ' ﬁ∏ﬁ Ãß≤›¿ﬁ- Ì
10 CLS:CLV:OUT0
20 A=RND(32):B=RND(24)

'Initialize ADXL345(I2C)
30 POKE #700,#31,#00:IF I2CW(#53,#700,1,#701,1)?"E"
40 POKE #700,#2D,#08:IF I2CW(#53,#700,1,#701,1)?"E"

'Mainloop 
'Read ADXL345(Adjust Center X+55,Y+93)
50 POKE #700,#32:IF I2CR(#53,#700,1,#701,6)?"E"
60 X=PEEK(#702)<<8+PEEK(#701):X=X+55:L=L+X/10
70 Y=PEEK(#704)<<8+PEEK(#703):Y=Y+93:T=T+Y/10*-1

80 IF L<0+2 L=0+2
90 IF L>31-2 L=31-2
100 IF T<0 T=0
110 IF T>21 T=21

'Move FINDER
120 IF L<>M||T<>U LC M-1,U-1:?"   ";:LC M-2,U  :?"     ";:LC M-1,U+1:?"   ";
130 LC L-1,T-1:?"òëô";:LC L-2,T:?"ëî ïë";:LC L-1,T+1:?"öëõ";
140 M=L:U=T

'Move BUG
150 D=RND(3)+D-1
160 IF D>7 D=0
170 IF D<0 D=7
180 IF D=0 A=A-1:B=B-1
190 IF D=1 A=A+0:B=B-1
200 IF D=2 A=A+1:B=B-1
210 IF D=3 A=A+1:B=B+0
220 IF D=4 A=A+1:B=B+1
230 IF D=5 A=A+0:B=B+1
240 IF D=6 A=A-1:B=B+1
250 IF D=7 A=A-1:B=B+0
260 IF A<0  A=0: D=3
270 IF A>31 A=31:D=7
280 IF B<0  B=0: D=5
290 IF B>23 B=23:D=1
300 LC A,B:?"Ì";:WAIT10:LC A,B:?" ";

'Finder LED
310 PWM 2,(1-(1-(ABS(L-A)+ABS(T-B))/2))*100

'Found BUG
320 B=IN(1)
330 IF B=0 LC L,T:IF L=A && T=B THEN ?"Ì":LC 12,12:?"–¬π¿!!":END ELSE ?"ê"

340 WAIT 1:GOTO 50
